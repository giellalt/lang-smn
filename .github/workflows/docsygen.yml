name: Build in-code documentation
on: [push]
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      # Use GitHub Actions' cache to cache dependencies on servers
      - uses: actions/cache@v2
        with:
          path: vendor/bundle
          key: ${{ runner.os }}-gems-${{ hashFiles('**/Gemfile.lock') }}
          restore-keys: |
            ${{ runner.os }}-gems-

      # Use GitHub Deploy Action to build and deploy to Github
      - uses: jeffreytse/jekyll-deploy-action@v0.3.1
        with:
          provider: 'github'
          token: ${{ secrets.GITHUB_TOKEN }} # It's your Personal Access Token(PAT)
          repository: 'giellalt/lang-smn'             # Default is current repository
          branch: 'gh-pages'         # Default is gh-pages for github provider
          jekyll_src: './docs/'      # Default is root directory
          jekyll_cfg: '_config.yml'  # Default is _config.yml
          jekyll_baseurl: '/lang-smn/'         # Default is according to _config.yml
          bundler_ver: '>=0'         # Default is latest bundler version
          cname: ''                  # Default is to not use a cname
          actor: ''                  # Default is the GITHUB_ACTOR
          pre_build_commands: ''     # Installing additional dependencies (Arch Linux)
#jobs:
#  build-and-deploy:
#    runs-on: ubuntu-latest
#    steps:
#      - name: ðŸ’Ž setup ruby
#        uses: ruby/setup-ruby@v1
#        with:
#          ruby-version: 2.6 # can change this to 2.7 or whatever version you prefer
#      - uses: actions/checkout@v2
#        with:
#          repository: giellalt/giella-core
#          path: giella-core
#      - uses: actions/checkout@v2
#        with:
#          repository: giellalt/giella-shared
#          path: giella-shared
#      - uses: actions/checkout@v2
#        with:
#          path: lang
#      - name: Install dev dependencies
#        uses: divvun/actions/lang/install-deps@master
#        with:
#          sudo: true
#      - name: Build giella-core/giella-shared
#        uses: divvun/actions/lang/build@master
#        with:
#          spellers: false
#          fst: hfst
#      - name: ðŸ”¨ install dependencies & build site
#        uses: limjh16/jekyll-action-ts@v2
#        with:
#          enable_cache: true
#          jekyll_src: lang/docs/
#      - name: ðŸš€ deploy gh pages
#        uses: peaceiris/actions-gh-pages@v3
#        with:
#          github_token: ${{ secrets.GITHUB_TOKEN }}
#          publish_dir: lang/docs/
#          enable_jekyll: true
